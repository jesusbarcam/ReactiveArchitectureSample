{"version":3,"file":"/Users/Rawdog/Developer/Curses/AngularUniversity/Angular NgRx Store Reactive Architecture/Repository/ReactiveArchitectureSample/src/server/api/apiMarkThreadAsReadByUser.ts","sources":["/Users/Rawdog/Developer/Curses/AngularUniversity/Angular NgRx Store Reactive Architecture/Repository/ReactiveArchitectureSample/src/server/api/apiMarkThreadAsReadByUser.ts"],"names":[],"mappings":";;AAGA,sCAAqC;AACrC,0BAA4B;AAI5B,yBAAgC,GAAgB;IAE5C,GAAG,CAAC,KAAK,CAAC,kBAAkB,CAAC,CAAC,KAAK,CAAC,UAAC,GAAG,EAAE,GAAG;QAEzC,IAAM,aAAa,GAAG,GAAG,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC;QAE5C,IAAM,QAAQ,GAAG,GAAG,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;QAElC,IAAM,YAAY,GAAG,GAAG,CAAC,IAAI,CAAC;QAE9B,IAAM,UAAU,GAAmB,CAAC,CAAC,MAAM,CAAC,mBAAS,CAAC,CAAC;QAEvD,IAAM,MAAM,GAAG,CAAC,CAAC,IAAI,CAAC,UAAU,EAAE,UAAA,MAAM,IAAK,OAAA,MAAM,CAAC,EAAE,IAAI,QAAQ,EAArB,CAAqB,CAAE,CAAC;QAErE,EAAE,CAAC,CAAC,YAAY,CAAC,cAAc,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;YACtC,MAAM,CAAC,YAAY,CAAC,aAAa,CAAC,GAAG,CAAC,CAAC;QAC3C,CAAC;QAED,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,EAAE,CAAC;IAE3B,CAAC,CAAC,CAAC;AAEP,CAAC;AAtBD,0CAsBC","sourcesContent":["\nimport {Application} from 'express';\nimport {Thread} from \"../../../shared/model/thread\";\nimport {dbThreads} from \"../db-data\";\nimport * as _ from 'lodash';\n\n\n\nexport function apiUpdateThread(app: Application) {\n\n    app.route('/api/threads/:id').patch((req, res) => {\n\n        const participantId = req.headers['userid'];\n\n        const threadId = req.params['id'];\n\n        const updatedProps = req.body;\n\n        const allThreads: Thread[] = <any> _.values(dbThreads);\n\n        const thread = _.find(allThreads, thread =>  thread.id == threadId );\n\n        if (updatedProps.hasOwnProperty('read')) {\n            thread.participants[participantId] = 0;\n        }\n\n        res.status(200).send();\n\n    });\n\n}"]}